<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cadastro.css">
    <title>cadastro</title>
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>

    <script type="text/javascript">
        function Inserir() {
            var dados = $('#form1').serialize();

            $.ajax({
                type: "POST",
                url: "inserir.php",
                data: dados,
                dataType: 'json',
                success: function (meu_json) {
                    var resultado = meu_json.resultado;
                    var mensagem = meu_json.mensagem;

                    alert(mensagem);
                },
                error: function (xhr, status, error) {
                    console.error('Ocorreu um erro ao enviar os dados: ' + error);
                },
                beforeSend: function (xhr) {
                },
                complete: function (xhr, status) {
                },
                timeout: 5000
            });
        }

        function Listar() {
            $.ajax({
                type: "GET",
                url: "listar.php",
                dataType: 'json',
                success: function (meu_json) {
                    var resultado = meu_json.resultado;
                    var mensagem = meu_json.mensagem;

                    if (resultado == 1) {
                        var usuarios = meu_json.usuarios;

                        // Exibir ou manipular a lista de usuários conforme necessário
                        console.log(usuarios);
                    } else {
                        alert(mensagem);
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Ocorreu um erro ao listar os usuários: ' + error);
                }
            });
        }

        function Atualizar() {
            function Atualizar() {
    var dados = $('#form1').serialize();

    $.ajax({
        type: "POST",
        url: "atualizar.php",
        data: dados,
        dataType: 'json',
        success: function (meu_json) {
            var resultado = meu_json.resultado;
            var mensagem = meu_json.mensagem;

            alert(mensagem);
        },
        error: function (xhr, status, error) {
            console.error('Ocorreu um erro ao enviar os dados de atualização: ' + error);
        },
        beforeSend: function (xhr) {
        },
        complete: function (xhr, status) {
        },
        timeout: 5000
    });
}
        }

        function Deletar() {
    // Capturar dados necessários para a exclusão (por exemplo, o ID do usuário)
    var idUsuario = obterIdUsuario();

    $.ajax({
        type: "POST",
        url: "deletar.php",
        data: { id: idUsuario },  // Enviar dados necessários para a exclusão
        dataType: 'json',
        success: function (meu_json) {
            var resultado = meu_json.resultado;
            var mensagem = meu_json.mensagem;

            alert(mensagem);
        },
        error: function (xhr, status, error) {
            console.error('Ocorreu um erro ao enviar os dados de exclusão: ' + error);
        },
        beforeSend: function (xhr) {
        },
        complete: function (xhr, status) {
        },
        timeout: 5000
    });
}

    </script>
</head>

<body>

    <div class="logo">
        <img src="../logo_pequena.png" width="150px">
    </div>
    <br>
    <div class="page">

        <div class="titulo">
            Associação de Serviços Sociais Voluntários de Guaramirim
        </div>

        <div class="formLogin">
            <form action="" method="post" id="form1">
                    CPF
                    <input type="text" name="cpf" class="tudo"> 
                    <br> 
                    E-mail
                    <input type="email" name="email" class="tudo">
                    <br> 
                    Senha
                    <input type="password" name="senha" class="tudo">
                    <br> 
                    Nome
                    <input type="text" name="nome" class="tudo">
                    <br> 
                    Telefone
                    <input type="text" name="telefone" class="tudo">
                    <br> 
                    Usuário
                    <input type="text" name="usuario" class="tudo">
                    <br> 

                <input type="button" class="button" name="enviar" value="Cadastrar" onclick="Inserir();" />
                <input type="button" class="button" name="listar" value="Listar Usuários" onclick="Listar();" />
                <input type="button" class="button" name="atualizar" value="Atualizar Usuário" onclick="Atualizar();" />
                <input type="button" class="button" name="deletar" value="Deletar Usuário" onclick="Deletar();" />
            </form>
        </div>

        <br>
    </div>

    <div class="logo_medica">
        <img src="logo_medicina.png" width="40px">
    </div>

</body>

</html>
